# BOJ 24542ë²ˆ íŠœí„°-íŠœí‹° ê´€ê³„ì˜ ìˆ˜

[BOJ 24542ë²ˆ íŠœí„°-íŠœí‹° ê´€ê³„ì˜ ìˆ˜](https://www.acmicpc.net/problem/24542)

### ğŸ¤” ë¬¸ì œ ì´í•´í•˜ê¸°

1. Nëª…ì˜ í•™ìƒê³¼ Mê°œì˜ í•™ìƒ ê°„ì˜ ì–‘ë°©í–¥ ì¹œë¶„ì´ ìˆë‹¤.
2. ì¹œë¶„ì„ í† ëŒ€ë¡œ êµìœ¡ìƒë“¤ë¼ë¦¬ íŠœí„°-íŠœí‹° ê´€ê³„ë¥¼ êµ¬ì„±í•œë‹¤. ì´ ë•Œ ê´€ê³„ëŠ” ë‹¨ë°©í–¥ìœ¼ë¡œ ì§€ì •í•œë‹¤.
3. ë°°í¬í•  ìë£ŒëŠ” íŠœí„° -> íŠœí‹°ì—ê²Œë§Œ ì „ë‹¬ì´ ê°€ëŠ¥í•œë°, ìµœì´ˆë¡œ ìë£Œë¥¼ ë°°í¬í•  ì¹œêµ¬ë¥¼ ìµœì†Œê°€ ë˜ê²Œ í•˜ë ¤ê³  í•œë‹¤.
   ```txt
   1 -> 2 -> 3 ìœ¼ë¡œ íŠœí„°-íŠœí‹° ê´€ê³„ê°€ ë§ºì–´ì ¸ ìˆë‹¤ë©´
   1ë²ˆ ì¹œêµ¬ì—ê²Œ ìµœì´ˆë¡œ ìë£Œë¥¼ ë°°í¬í•´ì•¼í•œë‹¤.
   ```
4. íŠœí„°-íŠœí‹°ì˜ ê´€ê³„ë¥¼ ì •í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ 1_000_000_007ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ë¥¼ ì¶œë ¥í•˜ë¼.

### â­ ì•Œê³ ë¦¬ì¦˜

- ê·¸ë˜í”„ íƒìƒ‰
  - BFS

### ğŸ“– ìŠ¤í† ë¦¬ ë¼ì¸

1. í•™ìƒì˜ ë¬¶ìŒì— ëª‡ ëª… ì”© ìˆëŠ”ì§€ ê·¸ë˜í”„ íƒìƒ‰ìœ¼ë¡œ ì„¼ë‹¤.
   numëª…ì˜ í•™ìƒì´ í•˜ë‚˜ì˜ ë¬¶ìŒì¼ ë•Œ, numê°œì˜ ê²½ìš°ê°€ ê°€ëŠ¥í•˜ë‹¤.

   ```
   1-2-3 ì¸ ê´€ê³„ì—ì„œëŠ”        1, 2, 3ë²ˆ ê°ê°ì˜ í•™ìƒì´ íŠœí„°ê°€ ë  ìˆ˜ ìˆë‹¤.
   ```

   ```
   1-2-3-4

               ì¸ ê´€ê³„ì—ì„œ ëª¨ë‘ 1, 2, 3, 4 ê°ê°ì´ íŠœí„°ê°€ ë  ìˆ˜ ìˆë‹¤.
   1-2-3
     |
     4
   ```

2. ê° í•™ìƒ ë¬¶ìŒ ë³„ í•™ìƒ ìˆ˜ì˜ ê³±ì„ êµ¬í•œë‹¤.

### ğŸ’» ë¬¸ì œë¥¼ í•´ê²°í•œ ì½”ë“œ

ì´ ë¬¸ì œë¥¼ í’€ ë•Œ ì—¬ëŸ¬ ë²ˆ í‹€ë ¸ë˜ ì´ìœ ëŠ” `solution()`í•¨ìˆ˜ì—ì„œ í•™ìƒ ìˆ˜ì˜ ê³±ì„ </br>
`res *= cntFriends(i) % MOD` ë¡œ êµ¬í–ˆê¸° ë•Œë¬¸ì´ë‹¤. </br>

ì´ëŠ” MOD ì—°ì‚°ì„ ê³ ë ¤í•˜ì§€ ì•Šì€ ë°©ë²•ìœ¼ë¡œ ì•„ë˜ ì½”ë“œì²˜ëŸ¼ ìˆ˜ì •í•´ì•¼ ì˜¬ë°”ë¥´ë‹¤. </br>
`res = (res * cntFriends(i)) % MOD`

```java
import java.io.*;
import java.util.*;

public class Main {

    static final int MOD = 1_000_000_007;

    static int n; // êµìœ¡ìƒì˜ ìˆ˜
    static List<Integer>[] friends;
    static boolean[] visited;

    public static void main(String[] args) throws IOException {
        readData();
        long ans = solution();
        writeData(ans);
    }

    private static long solution() {
        long res = 1;
        for (int i = 1; i <= n; ++i) {
            if (!visited[i]) {
                res = (res * cntFriends(i)) % MOD;
            }
        }
        return res;
    }

    // idxë²ˆ í•™ìƒê³¼ ì—°ê²°ë˜ì–´ ìˆëŠ” ì¹œêµ¬ì˜ ìˆ˜
    private static long cntFriends(int idx) {
        long cnt = 1;
        Queue<Integer> q = new LinkedList<>();

        visitFriend(idx, q);
        while (!q.isEmpty()) {
            int cur = q.poll();

            for (int next : friends[cur]) {
                if (visited[next]) continue; // ì´ë¯¸ í™•ì¸í•œ ì¹œêµ¬ì¸ ê²½ìš°
                visitFriend(next, q);
                ++cnt;
            }
        }

        return cnt;
    }

    // idxë²ˆ ì¹œêµ¬ ë°©ë¬¸ ì²˜ë¦¬í•˜ê¸°
    private static void visitFriend(int idx, Queue<Integer> queue) {
        queue.offer(idx);
        visited[idx] = true;
    }

    private static void readData() throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        StringTokenizer st = new StringTokenizer(br.readLine(), " ");
        n = Integer.parseInt(st.nextToken());
        int m = Integer.parseInt(st.nextToken());

        friends = new List[n + 1];
        for (int i = 1; i <= n; ++i) friends[i] = new ArrayList<>();
        visited = new boolean[n + 1];

        for (int i = 0; i < m; ++i) {
            st = new StringTokenizer(br.readLine(), " ");
            int fr1 = Integer.parseInt(st.nextToken());
            int fr2 = Integer.parseInt(st.nextToken());

            friends[fr1].add(fr2);
            friends[fr2].add(fr1);
        }

        br.close();
    }

    private static void writeData(long ans) throws IOException {
        BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(System.out));
        bw.write(String.format("%d\n", ans % MOD));
        bw.flush();
        bw.close();
    }
}
```
